Return-Path: <tommy@vmware.com>
X-Original-To: tommy@numba-tu.com
Delivered-To: tommy@numba-tu.com
Received: from mailout1.vmware.com (mailout1.vmware.com [65.113.40.130])
	by numba-tu.com (Postfix) with ESMTP id 920FF407EB
	for <tommy@numba-tu.com>; Fri, 18 Feb 2005 13:15:41 -0800 (PST)
Received: from mailout1.vmware.com (mailout1.vmware.com [127.0.0.1])
	by mailout1.vmware.com (Postfix) with ESMTP id 80719467E
	for <tommy@numba-tu.com>; Fri, 18 Feb 2005 13:15:35 -0800 (PST)
Received: from mailout1.vmware.com
	by mailout1.vmware.com (VaMailArmor-2.0.1.16) id 03876-7AF129BF;
	Fri, 18 Feb 2005 13:15:34 -0800
Received: from mailhost1.vmware.com (mailhost1.vmware.com [10.16.12.135])
	by mailout1.vmware.com (Postfix) with ESMTP id 6625945CE
	for <tommy@numba-tu.com>; Fri, 18 Feb 2005 13:15:34 -0800 (PST)
Received: from pa-exch3.vmware.com (pa-exch3.vmware.com [10.16.15.61])
	by mailhost1.vmware.com (Postfix) with ESMTP id C4C706FC325
	for <tommy@numba-tu.com>; Fri, 18 Feb 2005 13:15:35 -0800 (PST)
Received: from trapperkeeper.eng.vmware.com ([10.17.161.53]) by pa-exch3.vmware.com with Microsoft SMTPSVC(6.0.3790.211);
	 Fri, 18 Feb 2005 13:15:36 -0800
Received: by trapperkeeper.eng.vmware.com (Postfix, from userid 1121)
	id 8025358D5; Fri, 18 Feb 2005 13:15:31 -0800 (PST)
Date: Fri, 18 Feb 2005 13:15:31 -0800
To: tommy@numba-tu.com
Message-ID: <42165AF3.mail1AH17SLH9@trapperkeeper.eng.vmware.com>
User-Agent: nail 10.5 4/27/03
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii
Content-Transfer-Encoding: 7bit
From: tommy@vmware.com (Tommy Thorn)
X-OriginalArrivalTime: 18 Feb 2005 21:15:36.0577 (UTC) FILETIME=[FD515710:01C515FE]
X-AntiVirus: checked by Vexira MailArmor (version: 2.0.1.16; VAE: 6.29.0.5; VDF: 6.29.0.52; host: mailout1.vmware.com)

#include <stdio.h>
#include <stdlib.h>
#include <unistd.h>

static const char hexchars[]="0123456789abcdef";

int
main(int argc, char *argv[])
{
   unsigned char *buffer;
   unsigned char checksum;
   int count;
   unsigned char ch;

   if (argc != 2)
      exit(1);

   buffer = argv[1];

   putchar('+');
   putchar('$');
   checksum = 0;
   count = 0;

   while ((ch = buffer[count]) != 0) {
      if (!(putchar(ch)))
         return;
      checksum += ch;
      count += 1;
   }

   putchar('#');
   putchar(hexchars[checksum >> 4]);
   putchar(hexchars[checksum & 0xf]);
   putchar('\n');

   return 0;
}

/*
  +$E02#a7+$E02#a7+$E02#a7+$S00#b3
 */
